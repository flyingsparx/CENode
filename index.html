<html>
<body>
    <textarea style = "width:100%;max-width:100%;;margin:10px auto" id="input" placeholder="Enter some CE..."></textarea>
    <p style="font-size:10px;font-family:'Courier', 'Monospace';" id="card"></p>
    <br />
    <button id="send">Submit</button>
    <hr />
    <p>Cards:</p>
    <textarea readonly style="width:100%;max-width:100%;height:200px;" id="cards"></textarea>

    <p>CEStore concepts:</p>
    <textarea readonly style="width:100%;max-width:100%;height:200px;" id="content"></textarea>
    <script src="cestore.js"></script>  
    <script>
        var text = document.getElementById("input");
        var send = document.getElementById("send");
        var content = document.getElementById("content");
        var card = document.getElementById("card");
        var cards = document.getElementById("cards");
        var store = new cestore();    
        var card_count = 1;

        function refresh_content(){
            card_count++;
            var concepts = store.get_concepts();
            var c = store.get_cards();
            content.innerHTML = JSON.stringify(concepts, undefined, 2);
            cards.value = JSON.stringify(c, undefined, 2);
        }
        refresh_content();

        text.onkeyup = function(){
            card.innerHTML = "there is a tell_card named {card_id} that is from the individual 'test_user' and is to the agent 'Moira' and has '"+text.value+"' as content and has {timestamp} as timestamp.";
            
        }
        
        send.onclick = function(){
            var input = text.value;
            store.parse_ce(input);
            store.receive_card(card.innerHTML);
            text.value = "";
            card.innerHTML = "";
            refresh_content();
        };
    </script>
</body> 
</html>
